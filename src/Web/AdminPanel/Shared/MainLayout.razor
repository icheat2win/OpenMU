@inherits LayoutComponentBase
@using System.Reflection

<div class="app-container min-h-screen bg-slate-50 dark:bg-slate-900 text-slate-900 dark:text-white transition-colors">
    <NavMenu />
    <BlazoredToasts />
    
    <!-- Main Content Area (with left margin for sidebar) -->
    <div class="main-content ml-0 lg:ml-64 transition-all duration-300">
        <!-- Top Bar -->
        <div class="top-bar flex items-center justify-between px-6 py-3 bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 sticky top-0 z-40 shadow-sm">
            <BreadcrumbNavigation />
            <div class="flex items-center gap-4">
                <ThemeToggle />
                <a href="https://munique.net" target="_blank" 
                   class="text-sm text-slate-600 dark:text-slate-300 hover:text-cyan-600 dark:hover:text-cyan-400 transition-colors">
                    About
                </a>
            </div>
        </div>

        <!-- Page Content -->
        <div class="content px-6 py-6">
            @Body
        </div>
        
        <!-- Footer -->
        <footer class="px-6 py-4 bg-white dark:bg-slate-800 border-t border-slate-200 dark:border-slate-700">
            <div class="flex justify-between items-center text-sm text-slate-500 dark:text-slate-400">
                <span>OpenMU v@(typeof(MainLayout).Assembly.GetName().Version?.ToString(3) ?? "Unknown")</span>
                <span>Build: @GetBuildDate()</span>
            </div>
        </footer>
    </div>
</div>

@code {
    private string GetBuildDate()
    {
        var assembly = typeof(MainLayout).Assembly;
        var buildDate = System.IO.File.GetLastWriteTime(assembly.Location);
        return buildDate.ToString("yyyy-MM-dd HH:mm");
    }
}
